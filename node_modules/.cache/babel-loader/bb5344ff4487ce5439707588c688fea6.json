{"ast":null,"code":"var _jsxFileName = \"/home/noshu/react/test1/src/components/login/login.js\";\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\"; // import LoginBackground from \"../../../assets/backgrounds/loginBackground.svg\";\n\nimport { LoginForm } from \"./loginform\"; // import { loginRequest } from \"../../../services/open/auth\";\n// import store from \"../../../redux/store\";\n// import { login } from \"../../../redux/slices/user-slice\";\n\nimport { Redirect, useLocation } from \"react-router-dom\";\n\nconst Login = props => {\n  let [loginForm, formUpdater] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  let [loggedIn, logChanger] = useState(false); // constructor(props) {\n  //   super(props);\n  //   this.state = {\n  //     loginForm: {\n  //       username: \"\",\n  //       password: \"\",\n  //       role: \"user\",\n  //     },\n  //     loggedIn: false,\n  //   };\n  //   this.setFormData = this.setFormData.bind(this);\n  // }\n  // subscription = [];\n  // componentWillUnmount() {\n  //   // this.subscription.map((sub) => sub.unsubscribe());\n  // }\n  // setFormData = (formData) => {\n  //   this.setState({ ...this.state, loginForm: formData });\n  // };\n  // render() {\n  //   let role = this.state.role;\n\n  useEffect(() => {\n    if (loginForm.username.length > 0) {\n      console.log(loginForm);\n      fetch(\"http://localhost:5000/login\", {\n        body: JSON.stringify(loginForm),\n        method: \"POST\"\n      }).then(res => {\n        res.json().then(res => {\n          if (res.status == 400) {\n            console.log(\"password wrong\");\n          } else {\n            console.log(\"logging in\");\n            localStorage.setItem(\"token\", \"shoiashdhg23821y39huudhf8972397yh98327t498324y92.jhunduih3987y983493284.9892831hdu7h77igds\");\n          }\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, [loginForm]);\n  return /*#__PURE__*/React.createElement(LoginContainer, {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-stretch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6 col-md-8 col-12 border-right bg-white d-flex justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-success text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(LoginForm, {\n    formSubmission: formUpdater,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  })))), loggedIn && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 20\n    }\n  }));\n};\n\nexport const LoginContainer = styled.div`\n  min-height: 100vh;\n  background-repeat: no-repeat;\n  background-position: top right;\n  background-size: 100% auto;\n  .row {\n    min-height: 100vh;\n  }\n  @media (max-width: 768px) {\n    padding-top: 60px;\n  }\n`;\nexport default Login;","map":{"version":3,"sources":["/home/noshu/react/test1/src/components/login/login.js"],"names":["React","useEffect","useState","styled","LoginForm","Redirect","useLocation","Login","props","loginForm","formUpdater","username","password","loggedIn","logChanger","length","console","log","fetch","body","JSON","stringify","method","then","res","json","status","localStorage","setItem","catch","err","LoginContainer","div"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,mBAAnB,C,CACA;;AACA,SAASC,SAAT,QAA0B,aAA1B,C,CACA;AACA;AACA;;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,kBAAtC;;AACA,MAAMC,KAAK,GAAIC,KAAD,IAAW;AACvB,MAAI,CAACC,SAAD,EAAYC,WAAZ,IAA2BR,QAAQ,CAAC;AAAES,IAAAA,QAAQ,EAAE,EAAZ;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAAD,CAAvC;AACA,MAAI,CAACC,QAAD,EAAWC,UAAX,IAAyBZ,QAAQ,CAAC,KAAD,CAArC,CAFuB,CAGvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,SAAS,CAACE,QAAV,CAAmBI,MAAnB,GAA4B,CAAhC,EAAmC;AACjCC,MAAAA,OAAO,CAACC,GAAR,CAAYR,SAAZ;AACAS,MAAAA,KAAK,CAAC,6BAAD,EAAgC;AACnCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeZ,SAAf,CAD6B;AAEnCa,QAAAA,MAAM,EAAE;AAF2B,OAAhC,CAAL,CAIGC,IAJH,CAISC,GAAD,IAAS;AACbA,QAAAA,GAAG,CAACC,IAAJ,GAAWF,IAAX,CAAiBC,GAAD,IAAS;AACvB,cAAIA,GAAG,CAACE,MAAJ,IAAc,GAAlB,EAAuB;AACrBV,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD,WAFD,MAEO;AACLD,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAU,YAAAA,YAAY,CAACC,OAAb,CACE,OADF,EAEE,4FAFF;AAID;AACF,SAVD;AAWD,OAhBH,EAiBGC,KAjBH,CAiBUC,GAAD,IAAS;AACdd,QAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACD,OAnBH;AAoBD;AACF,GAxBQ,EAwBN,CAACrB,SAAD,CAxBM,CAAT;AAyBA,sBACE,oBAAC,cAAD;AAAgB,IAAA,SAAS,EAAC,iBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iGAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,0BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,SAAD;AAAW,IAAA,cAAc,EAAEC,WAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF,CADF,EASGG,QAAQ,iBAAI,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATf,CADF;AAaD,CAjED;;AAmEA,OAAO,MAAMkB,cAAc,GAAG5B,MAAM,CAAC6B,GAAI;;;;;;;;;;;CAAlC;AAaP,eAAezB,KAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n// import LoginBackground from \"../../../assets/backgrounds/loginBackground.svg\";\nimport { LoginForm } from \"./loginform\";\n// import { loginRequest } from \"../../../services/open/auth\";\n// import store from \"../../../redux/store\";\n// import { login } from \"../../../redux/slices/user-slice\";\nimport { Redirect, useLocation } from \"react-router-dom\";\nconst Login = (props) => {\n  let [loginForm, formUpdater] = useState({ username: \"\", password: \"\" });\n  let [loggedIn, logChanger] = useState(false);\n  // constructor(props) {\n  //   super(props);\n  //   this.state = {\n  //     loginForm: {\n  //       username: \"\",\n  //       password: \"\",\n  //       role: \"user\",\n  //     },\n  //     loggedIn: false,\n  //   };\n  //   this.setFormData = this.setFormData.bind(this);\n  // }\n\n  // subscription = [];\n  // componentWillUnmount() {\n  //   // this.subscription.map((sub) => sub.unsubscribe());\n  // }\n  // setFormData = (formData) => {\n  //   this.setState({ ...this.state, loginForm: formData });\n\n  // };\n  // render() {\n  //   let role = this.state.role;\n\n  useEffect(() => {\n    if (loginForm.username.length > 0) {\n      console.log(loginForm);\n      fetch(\"http://localhost:5000/login\", {\n        body: JSON.stringify(loginForm),\n        method: \"POST\",\n      })\n        .then((res) => {\n          res.json().then((res) => {\n            if (res.status == 400) {\n              console.log(\"password wrong\");\n            } else {\n              console.log(\"logging in\");\n              localStorage.setItem(\n                \"token\",\n                \"shoiashdhg23821y39huudhf8972397yh98327t498324y92.jhunduih3987y983493284.9892831hdu7h77igds\"\n              );\n            }\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [loginForm]);\n  return (\n    <LoginContainer className=\"container-fluid\">\n      <div className=\"row align-items-stretch\">\n        <div className=\"col-lg-6 col-md-8 col-12 border-right bg-white d-flex justify-content-center align-items-center\">\n          <div className=\"content\">\n            <h2 className=\"text-success text-center\">Login</h2>\n            <LoginForm formSubmission={formUpdater} />\n          </div>\n        </div>\n      </div>\n      {loggedIn && <Redirect to=\"/\" />}\n    </LoginContainer>\n  );\n};\n\nexport const LoginContainer = styled.div`\n  min-height: 100vh;\n  background-repeat: no-repeat;\n  background-position: top right;\n  background-size: 100% auto;\n  .row {\n    min-height: 100vh;\n  }\n  @media (max-width: 768px) {\n    padding-top: 60px;\n  }\n`;\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}