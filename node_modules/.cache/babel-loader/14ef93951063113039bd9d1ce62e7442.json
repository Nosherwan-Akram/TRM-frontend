{"ast":null,"code":"var _jsxFileName = \"/home/noshu/react/test1/src/components/login/login.js\";\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\"; // import LoginBackground from \"../../../assets/backgrounds/loginBackground.svg\";\n\nimport { LoginForm } from \"./loginform\"; // import { loginRequest } from \"../../../services/open/auth\";\n// import store from \"../../../redux/store\";\n// import { login } from \"../../../redux/slices/user-slice\";\n\nimport { Redirect, useLocation, Link } from \"react-router-dom\";\n\nconst Login = props => {\n  let [loginForm, formUpdater] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  let [loggedIn, logChanger] = useState(false);\n  let [error, errorUpdater] = useState(null);\n  useEffect(() => {\n    if (loginForm.username.length > 0) {\n      console.log(loginForm);\n      fetch(\"http://localhost:5000/login\", {\n        body: JSON.stringify(loginForm),\n        method: \"POST\"\n      }).then(res => {\n        res.json().then(res => {\n          if (res.status == 400) {\n            errorUpdater(\"Wrong Password\");\n          } else {\n            localStorage.setItem(\"token\", \"shoiashdhg23821y39huudhf8972397yh98327t498324y92.jhunduih3987y983493284.9892831hdu7h77igds\");\n            localStorage.setItem(\"username\", res.username);\n            console.log(res.message);\n            console.log(localStorage);\n            logChanger(true);\n          }\n        });\n      }).catch(err => {\n        errorUpdater(\"Some internal error\");\n      });\n    }\n  }, [loginForm]);\n  return /*#__PURE__*/React.createElement(LoginContainer, {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-stretch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6 col-md-8 col-12 border-right bg-white d-flex justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-success text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(LoginForm, {\n    formSubmission: formUpdater,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }), error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 23\n    }\n  }, error), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    className: \"btn btn-success w-100\",\n    to: \"signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \"Signup\")))), loggedIn && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 20\n    }\n  }));\n};\n\nexport const LoginContainer = styled.div`\n  min-height: 100vh;\n  background-repeat: no-repeat;\n  background-position: top right;\n  background-size: 100% auto;\n  .row {\n    min-height: 100vh;\n  }\n  @media (max-width: 768px) {\n    padding-top: 60px;\n  }\n`;\nexport default Login;","map":{"version":3,"sources":["/home/noshu/react/test1/src/components/login/login.js"],"names":["React","useEffect","useState","styled","LoginForm","Redirect","useLocation","Link","Login","props","loginForm","formUpdater","username","password","loggedIn","logChanger","error","errorUpdater","length","console","log","fetch","body","JSON","stringify","method","then","res","json","status","localStorage","setItem","message","catch","err","LoginContainer","div"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n// import LoginBackground from \"../../../assets/backgrounds/loginBackground.svg\";\nimport { LoginForm } from \"./loginform\";\n// import { loginRequest } from \"../../../services/open/auth\";\n// import store from \"../../../redux/store\";\n// import { login } from \"../../../redux/slices/user-slice\";\nimport { Redirect, useLocation, Link } from \"react-router-dom\";\nconst Login = (props) => {\n  let [loginForm, formUpdater] = useState({ username: \"\", password: \"\" });\n  let [loggedIn, logChanger] = useState(false);\n  let [error, errorUpdater] = useState(null);\n  useEffect(() => {\n    if (loginForm.username.length > 0) {\n      console.log(loginForm);\n      fetch(\"http://localhost:5000/login\", {\n        body: JSON.stringify(loginForm),\n        method: \"POST\",\n      })\n        .then((res) => {\n          res.json().then((res) => {\n            if (res.status == 400) {\n              errorUpdater(\"Wrong Password\");\n            } else {\n              localStorage.setItem(\n                \"token\",\n                \"shoiashdhg23821y39huudhf8972397yh98327t498324y92.jhunduih3987y983493284.9892831hdu7h77igds\"\n              );\n              localStorage.setItem(\"username\", res.username);\n              console.log(res.message);\n              console.log(localStorage);\n              logChanger(true);\n            }\n          });\n        })\n        .catch((err) => {\n          errorUpdater(\"Some internal error\");\n        });\n    }\n  }, [loginForm]);\n  return (\n    <LoginContainer className=\"container-fluid\">\n      <div className=\"row align-items-stretch\">\n        <div className=\"col-lg-6 col-md-8 col-12 border-right bg-white d-flex justify-content-center align-items-center\">\n          <div className=\"content\">\n            <h2 className=\"text-success text-center\">Login</h2>\n            <LoginForm formSubmission={formUpdater} />\n            {error && <div className=\"alert alert-danger\">{error}</div>}\n            <hr className=\"w-100\" />\n            <Link className=\"btn btn-success w-100\" to=\"signup\">\n              Signup\n            </Link>\n          </div>\n        </div>\n      </div>\n      {loggedIn && <Redirect to=\"/\" />}\n    </LoginContainer>\n  );\n};\n\nexport const LoginContainer = styled.div`\n  min-height: 100vh;\n  background-repeat: no-repeat;\n  background-position: top right;\n  background-size: 100% auto;\n  .row {\n    min-height: 100vh;\n  }\n  @media (max-width: 768px) {\n    padding-top: 60px;\n  }\n`;\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}